<site>
  <packgetname>com.youbaysw</packgetname>
  <minapi>1</minapi>
  <author name="YI" avatarUrl="" description="自用" donateUrl="" />
  <info type="801" versionCode="001" versionName="v1.0" name="友吧影视" description="线路标题不显示"
    iconUrl="https://fscomps.fotosearch.com/bigcomps/CSP/CSP513/k24901466.jpg" subscribeUrl="" />

  <rule type="101" typeonclickaction="" subtypename="电影" jsmethod="list();"
    url="https://m.youbaysw.com/dianying/p%count%.html"
    currentpagecountholder="%count%" searchkeywordholder="">
    <script>
      function list() {
        var host = "https://m.youbaysw.com";
        var datalist = $("ul.list-unstyled.vod-item-img.ff-img-140 li").toArray();
        if (datalist.length == 0) {
          var response = { "code": "200", "msg": "suc", "content": "" };
          return response;
        }
        var tmparray = new Array();
        for (var i = 0; i < datalist.length; i++) {
          var href = datalist[i].getElementsByTagName("a")[0].href;
          var title = datalist[i].getElementsByTagName("img")[0].alt;
          var imgurl = host + datalist[i].getElementsByTagName("img")[0].getAttribute("data-original");
          var content = datalist[i].getElementsByTagName("img")[0].alt;
          var obj = { "title": title, "detailUrl": href, "posterUrl": imgurl, "content": content };
          tmparray.push(obj);
        }
        var response = { "code": "200", "msg": "suc", "content": tmparray };
        return response;
      }
    </script>
  </rule>

  <rule type="101" typeonclickaction="" subtypename="追剧" jsmethod="list();"
    url="https://m.youbaysw.com/dianshiju/p%count%.html"
    currentpagecountholder="%count%" searchkeywordholder="">
    <script>
      function list() {
        var host = "https://m.youbaysw.com";
        var datalist = $("ul.list-unstyled.vod-item-img.ff-img-140 li").toArray();
        if (datalist.length == 0) {
          var response = { "code": "200", "msg": "suc", "content": "" };
          return response;
        }
        var tmparray = new Array();
        for (var i = 0; i < datalist.length; i++) {
          var href = datalist[i].getElementsByTagName("a")[0].href;
          var title = datalist[i].getElementsByTagName("img")[0].alt;
          var imgurl = host + datalist[i].getElementsByTagName("img")[0].getAttribute("data-original");
          var content = datalist[i].getElementsByTagName("img")[0].alt;
          var obj = { "title": title, "detailUrl": href, "posterUrl": imgurl, "content": content };
          tmparray.push(obj);
        }
        var response = { "code": "200", "msg": "suc", "content": tmparray };
        return response;
      }
    </script>
  </rule>

  <rule type="101" typeonclickaction="" subtypename="动漫" jsmethod="list();"
    url="https://m.youbaysw.com/dongman/p%count%.html"
    currentpagecountholder="%count%" searchkeywordholder="">
    <script>
      function list() {
        var host = "https://m.youbaysw.com";
        var datalist = $("ul.list-unstyled.vod-item-img.ff-img-140 li").toArray();
        if (datalist.length == 0) {
          var response = { "code": "200", "msg": "suc", "content": "" };
          return response;
        }
        var tmparray = new Array();
        for (var i = 0; i < datalist.length; i++) {
          var href = datalist[i].getElementsByTagName("a")[0].href;
          var title = datalist[i].getElementsByTagName("img")[0].alt;
          var imgurl = host + datalist[i].getElementsByTagName("img")[0].getAttribute("data-original");
          var content = datalist[i].getElementsByTagName("img")[0].alt;
          var obj = { "title": title, "detailUrl": href, "posterUrl": imgurl, "content": content };
          tmparray.push(obj);
        }
        var response = { "code": "200", "msg": "suc", "content": tmparray };
        return response;
      }
    </script>
  </rule>

  <rule type="101" typeonclickaction="" subtypename="综艺" jsmethod="list();"
    url="https://m.youbaysw.com/zongyi/p%count%.html"
    currentpagecountholder="%count%" searchkeywordholder="">
    <script>
      function list() {
        var host = "https://m.youbaysw.com";
        var datalist = $("ul.list-unstyled.vod-item-img.ff-img-140 li").toArray();
        if (datalist.length == 0) {
          var response = { "code": "200", "msg": "suc", "content": "" };
          return response;
        }
        var tmparray = new Array();
        for (var i = 0; i < datalist.length; i++) {
          var href = datalist[i].getElementsByTagName("a")[0].href;
          var title = datalist[i].getElementsByTagName("img")[0].alt;
          var imgurl = host + datalist[i].getElementsByTagName("img")[0].getAttribute("data-original");
          var content = datalist[i].getElementsByTagName("img")[0].alt;
          var obj = { "title": title, "detailUrl": href, "posterUrl": imgurl, "content": content };
          tmparray.push(obj);
        }
        var response = { "code": "200", "msg": "suc", "content": tmparray };
        return response;
      }
    </script>
  </rule>

  <rule type="101" typeonclickaction="" subtypename="福利" jsmethod="list();"
    url="https://m.youbaysw.com/fulipian/p%count%.html"
    currentpagecountholder="%count%" searchkeywordholder="">
    <script>
      function list() {
        var host = "https://m.youbaysw.com";
        var datalist = $("ul.list-unstyled.vod-item-img.ff-img-140 li").toArray();
        if (datalist.length == 0) {
          var response = { "code": "200", "msg": "suc", "content": "" };
          return response;
        }
        var tmparray = new Array();
        for (var i = 0; i < datalist.length; i++) {
          var href = datalist[i].getElementsByTagName("a")[0].href;
          var title = datalist[i].getElementsByTagName("img")[0].alt;
          var imgurl = host + datalist[i].getElementsByTagName("img")[0].getAttribute("data-original");
          var content = datalist[i].getElementsByTagName("img")[0].alt;
          var obj = { "title": title, "detailUrl": href, "posterUrl": imgurl, "content": content };
          tmparray.push(obj);
        }
        var response = { "code": "200", "msg": "suc", "content": tmparray };
        return response;
      }
    </script>
  </rule>

  <rule type="102" jsmethod="detail();">
    <script>
      function detail() {
        var host = "https://m.youbaysw.com";
        var posterUrl = $("img.media-object.img-thumbnail.ff-img:first").attr("data-original");
        var pageTitle = $("img.media-object.img-thumbnail.ff-img:first").attr("alt");
        var allText = $("[name='description']:first").attr("content").trim().replace(" ", "").replace("\n", "");
        var shortText = allText.substring(0, allText.length > 200 ? 200 : allText.length).trim();
        var actor;
        var actorTitle = $("div.media-body dt").toArray();
        var actorText = $("div.media-body dd").toArray();
        for (var i = 0; i < actorTitle.length; i++) {
          var stTmp;
          stTmp = actorTitle[i].innerHTML;
          if (stTmp.indexOf("主演") != -1) {
            continue;
          }
          var stDetail = actorText[i].getElementsByTagName("a");
          for (var j = 0; j < stDetail.length; j++) {
            var stDetailTmp = stDetail[j].innerHTML;
            stTmp = stTmp + " " + stDetailTmp;
          }
          actor = actor + "<br>" + stTmp;
        }
        var allDownList = new Array();
        var allDownTitleTmp = $("div.page-header.ff-playurl-line h2.text-green").toArray();
        var allDownListTmp = $("div.tab-pane.fade.in.active.vod-nav-play ul").toArray();
        for (var i = 0; i < allDownListTmp.length; i++) {
          var titleSort = allDownTitleTmp[i].Text;
          var downloadTmp = allDownListTmp[i].getElementsByTagName("li");
          var oneDownList = new Array();
          for (var j = 0; j < downloadTmp.length; j++) {
            var href = host + downloadTmp[j].getElementsByTagName("a")[0].getAttribute("href");
            var title = downloadTmp[j].getElementsByTagName("a")[0].innerHTML;
            var downloadBean = {
              "name": title,
              "href": href
            };
            oneDownList.push(downloadBean);
          }
          var pageDetail = {
            "title": titleSort,
            "downlistInfos": oneDownList
          };
          allDownList.push(pageDetail);
        }
        var pageInfo = {
          "posterUrl": posterUrl,
          "title": pageTitle.replace("免费观看", ""),
          "allText": allText,
          "shortText": shortText,
          "summary": actor.replace("undefined", ""),
          "downlist": allDownList
        };
        var response = {"code": "200", "msg": "suc", "content": pageInfo};
        return response;
      }
    </script>
  </rule>

  <rule type="103" typeonclickaction="" subtypename="" jsmethod="search();"
    url="https://m.youbaysw.com/index.php?s=vod-search-name-%keyword%-p-%count%.html" currentpagecountholder="%count%"
    searchkeywordholder="%keyword%">
    <script>
      function search() {
        var host = "https://m.youbaysw.com";
        var datalist = $("ul.list-unstyled.vod-item-img.ff-img-140 li").toArray();
        if (datalist.length == 0) {
          var response = { "code": "200", "msg": "suc", "content": "" };
          return response;
        }
        var tmparray = new Array();
        for (var i = 0; i < datalist.length; i++) {
          var href = datalist[i].getElementsByTagName("a")[0].href;
          var title = datalist[i].getElementsByTagName("img")[0].alt;
          var imgurl = host + datalist[i].getElementsByTagName("img")[0].getAttribute("data-original");
          var content = datalist[i].getElementsByTagName("img")[0].alt;
          var obj = { "title": title, "detailUrl": href, "posterUrl": imgurl, "content": content };
          tmparray.push(obj);
        }
        var response = { "code": "200", "msg": "suc", "content": JSON.stringify(tmparray) };
        return response;
      }
    </script>
  </rule>
</site>
